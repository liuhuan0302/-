<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<style>
*{
    margin:0;
    padding:0;
}
section{
    width:400px;
    margin: 30px auto;
}
div{
    height:60px;
    margin-bottom:10px;
    background:green;
}
p{
    font-size:14px;
    color:#ccc;
    line-height:14px;
    margin:3px 40px;
}
.btn{
   height:30px;
   width:60px;
   font-size:14px;
   color:#000;
   line-height:30px;
   text-align:center;
   background:green;
   margin:10px 0 0 100px;

}
span{
   
    height:30px;
    width:200px;
    background:#ccc;
    font-size:25px;
    font-weight:bold;
    color:#000;
    line-height:30px;
}
#txt1{
   
    font-size:14px;
    color:black;
    border: 1px solid #000;
}
.p1{
float:left;
margin-left:0px;

}
.p2{
    font-size:14px;
    color:blue;
    line-height:14px;
    margin-top:3px; 
    float:left;
    margin-left:10px;
}
</style>

<body>
    <section>
        <div>
            <label for="">*邮件地址</label>
            <input type="text" id ='mail'><label for="">a</label>
            <select name="" id="">
                <option value="">163.com</option>
            </select>
            <p>6-18字符,可使用字母,数字,下划线,需要字母开头</p>
        </div>
        <div>
            <label for="" >*密码</label>
            <input type="text" value="3333333" autocomplete="off" id = 'passWord'>
            <span id = txt1></span>
            <p>6-18字符,区分大小写</p>
        </div>
        <div>
            <label for="">*验证码</label>
            <input type="text" id = 'code'> <span id ='txt2'>AAAA</span>
            <p class= 'p1'>请填写图片中的字符,不区分大小写</p><em class ='p2'>看不清楚,换张图片</em>
        </div>
        <label for="">*手机号码</label>
        <input type="text"  id ='num'>
        <div>
            <button class='btn'>立即注册</button>
        </div>
        <script src="./myAPi/myApi.js/myAPI.js"></script>
        <script>
         var 
            oMail = document.querySelector('#mail'),
            pwd = document.querySelector('#passWord'),
            oCode = document.querySelector('#code'),
            txt1 = document.querySelector('#txt1'),
            txt2 = document.querySelector('#txt2'),
            oBtn = document.querySelector('.btn'),
            oNum = document.querySelector('#code');
            // var reg = /^[a-zA-Z]\w{5,17}$/;
            // oMail.oninput = function(){
                
            //     if(reg.test(oMailVal)){
            //         oMail.innerHTML = '成功';
            //     }else{
            //         oMail.disable = "disabled";
            //     }
            // }
            //对输入的密码进行监测
            var special ="@#$%^&*";
                //绑定输入框,对其进行监测
                pwd.oninput = function(){
                    //对输入框中值进行获取
                    var pwdValue = pwd.value;
                    //判断输入数值长度是否在6-16
                    if(pwdValue.length < 6 || pwdValue.length > 16 ){
                        return txt1.innerHTML = "密码长度不合法";
                    }
                    if(Number(pwdValue) == pwdValue){
                        return txt1.innerHTML = "密码弱";
                    } 
                    for(var i = 0;i < special.length;i++){
                        if(pwdValue.indexOf(special[i] != -1)){
                            return txt1.innerHTML = "密码强度强";
                        }
                    }
                    return pwd.innerHTML = "密码强度适中";
                }

                //获取随机验证码
                txt2.onclick = function(){
                //获取一个空字符串
                var str = '';
                for(var i = 0; i < 4; i++){
                    //获取随机数
                    var num = randomNumber(48,122);
                    //判断随机数是否在条件之内
                    if(num >= 48 && num <= 57 || num >= 65 && num <= 90 || num >= 97 &&num <= 122 ){
                        str += String.fromCharCode(num);
                    }else{
                        //不满足条件
                        i--;
                    }
                }
                //把随机码放到文本框中
                txt2.innerHTML = str;
                //给文本添加随机颜色
                code.style.color = randomColor(); 
            }
        //    var reg1 =/^1[356789]\d{9}$/;
        //    oNum.oninput = function(){
              
        //        if(){

        //        }else{
        //            oNum.disable ='disabled';
        //        }
        //    }
        /*
        逻辑:
            当邮箱,密码,验证码和手机号格式都正确是,注册成功
        
        */
          var reg = /^[a-zA-Z]\w{5,17}$/;
           var reg1 =/^1[356789]\d{9}$/;
           var oMailVal = oMail.value;
           var oNumV = oNum.value;
           var oCodeV = oCode.value;
         
           oBtn.onclick = function(){
                if((reg.test(oMailVal)) && reg1.test(oNumV) &&(oCodeV == txt2.value)){
                    console.log('注册成功')
                }else{
                    console.log('注册失败')
                }
           }
        </script>
    </section>
</body>

</html>