<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
     *{
            margin:0;
            padding:0;
            box-sizing: border-box;
        }
        section{
            width:1200px;
            overflow: hidden;
            margin:0 auto;
        }
        section div{
            width:23%;
            height:300px;
            border:3px solid green;
            margin:1%;
            float:left;
        }
        article{
            width: 1200px;
            margin:20px auto 0;
            overflow: hidden;
        }
        article div{
            width:18%;
            height:150px;
            border:3px solid pink;
            float:left;
            margin:1%;
        }



        img{
            display:block;
            width:100%;
            height:100%;
            opacity: 0;
            transition:5s;
        }
    
    </style>
</head>
<body>
    <section>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
        <div>
            <img src="" data-src="./1.jpg" alt="">
        </div>
    </section>
    <article>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
        <div>
            <img src="" data-src='./2.jpg' alt="">
        </div>
    </article>
    <script>
    //先获取页面中所有的图片
    //循环所有的图片的offsetTop
    //加载条件： 图片的 offsetTop < 当前浏览器显示区 + 滚动条的高度

    //等页面资源加载完毕之后再在
    window.onload = function(){
        class lazyLoad{
            constructor(){
                this.imgs = document.querySelectorAll('img');
                this.init();
            }
            init(){
                this.load();
                this.eventBind();
            }
            load(){
                //获取滚动条的高度
                let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
                //获取视口的高度
                let winH = window.innerHeight;
                //对图片进行循环遍历
                for(let i = 0, k = this.imgs.length;i < k;i++){
                    //判断(当什么时候图片开始加载)
                    //offsetTop 图片距离的顶端的高
                    if(this.imgs[i].offsetTop <  scrollTop + winH){
                        this.imgs[i].src = this.imgs[i].getAttribute('data-src');
                        this.imgs[i].style.opacity = 1;
                        
                    }
                }
            }
            eventBind(){
                document.addEventListener('scroll',this.load.bind(this));
            }
        }
        new lazyLoad();
    }
    
    </script>
</body>
</html>