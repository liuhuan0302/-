<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
    *{
        margin:0;
        padding:0;
    }
    img{
        display:block;
    }
    body{
        height:100%;
    }
    section{
        height:100%;
        width:100%;
    }
    #imgShow{
        height:100%;
        width:100%;
    }
    .cymbal{
        height:60px;
        width:60px;
        position:absolute;
        left:6%;
        bottom:45%;
    }
    .drink{
        height:60px;
        width:60px;
        position:absolute;
        left:6%;
        bottom:35%;
    }
    .eat{
        height:60px;
        width:60px;
        position:absolute;
        left:6%;
        bottom:25%;
    }
    .fart{
        height:60px;
        width:60px;
        position:absolute;
        right:6%;
        bottom:45%;
    }
    .pie{
        height:60px;
        width:60px;
        position:absolute;
        right:6%;
        bottom:35%;
    }
    .scratch{
        height:60px;
        width:60px;
        position:absolute;
        right:6%;
        bottom:25%;
    }
    
    </style>
</head>
<body>
    <section>
        <img src="./tom/img/Animations/angry/angry_00.jpg" alt="" id="imgShow">
    </section>
    <div class="cymbal">
        <img src="./tom/img/Buttons/cymbal/cymbal.png" alt="">
    </div>
    <div class="drink">
        <img src="./tom/img/Buttons/drink/drink.png" alt="">
    </div>
    <div class="eat">
        <img src="./tom/img/Buttons/eat/eat.png" alt="">
    </div>
    <div class="fart">
        <img src="./tom/img/Buttons/fart/fart.png" alt="">
    </div>
    <div class="pie">
        <img src="./tom/img/Buttons/pie/pie.png" alt="">
    </div>
    <div class="scratch">
        <img src="./tom/img/Buttons/scratch/scratch.png" alt="">
    </div>
    div.class

    <audio src="" id="music"></audio>
    <script>
    
    function Tom(){
        this.imgShow = document.getElementById('imgShow');
        this.btn = document.querySelectorAll('div');
        this.music = document.getElementById('music');
        
        this.init(); 
    }
    Tom.prototype = {
        init:function(){
            this.eventBind();
            // this.tomplay('drink',80);
        },
        //切换图片
        tomplay:function(name,num){
            //30毫秒切换多张图片
            var _this = this;
            this.count = 0;//保证每次点击都从0 开始
            //开启定时器之前先要清除定时器(防止越点越快)
            clearInterval(this.timer);
            this.timer = setInterval(()=>{
                //需要进行判断,多少张暂停
                if(_this.count >= num){
                    //定时器中this需要保存
                    clearInterval(this.timer)
                    _this.count = 0;//清除count,否则count 一致保持在80
                }else{
                    _this.count++;
                    _this.imgShow.src = './tom/img/Animations/'+ name +'/'+ name  +'_'+ _this.mendZero(_this.count) +'.jpg'
                }
                
            },80)
        },
        //补零
        mendZero:function(num){
            if(num < 10){
                return '0' + num;
            }else{
                return num;
            }
        },
        //事件绑定
        eventBind:function(){
            //给集合绑定事件
            var _this = this;
            for(let i = 0,k = this.btn.length; i < k; i++ ){
                console.log(this);
                //绑定点击事件
                this.btn[i].onclick = function(){
                     //获取点击元素的类名
                     let classN = this.className;
                     //对类名进行判断
                     switch(classN){
                        case 'cymbal':
                        _this.tomplay('cymbal',12);
                        _this.music.src = './tom/mp3/pia.mp3';
                        _this.music.play();
                        break;
                        case 'drink':
                        _this.tomplay('drink',80);
                        break;
                        case 'eat':
                        _this.tomplay('eat',39);
                        break;
                        case 'fart':
                        _this.tomplay('fart',27);
                        break;
                        case 'pie':
                        _this.tomplay('pie',23);
                        break;
                        case 'scratch':
                        _this.tomplay('scratch',55);
                        break;
                     }
                }
            }
        }
    }
    new Tom();
    
    </script>
</body>
</html>